<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script type="text/javascript">


$(document).ready(function(){
	

	var handleFileSelect = function(evt) {
	    var files = evt.target.files;
	    var file = files[0];

	    if (files && file) {
	        var reader = new FileReader();

	        reader.onload = function(readerEvt) {
	            var binaryString = readerEvt.target.result;
	            id = parseInt(location.hash.replace("#",""));
	            document.getElementById("base64textarea").value = btoa(binaryString);
	            $.post("/video/upload?id="+id, btoa(binaryString), function(data, status){
					console.log(data);
				});
	        };

	        reader.readAsBinaryString(file);
	    }
	};

	if (window.File && window.FileReader && window.FileList && window.Blob) {
	    document.getElementById('filePicker').addEventListener('change', handleFileSelect, false);
	} else {
	    alert('The File APIs are not fully supported in this browser.');
	}
});


</script>
<body>
	<div>
    <div>
        <label for="filePicker">Choose or drag a file:</label><br>
        <input type="file" id="filePicker">
    </div>
    <br>
    <div>
        <h1>Base64 encoded version</h1>
        <textarea id="base64textarea" placeholder="Base64 will appear here" cols="50" rows="15"></textarea>
        <video src="/uploads/5.mp4"/>
    </div>
</div>
</body>
</html>